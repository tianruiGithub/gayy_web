KindEditor.plugin("quickformat",function(e){function t(e){for(var t=e.first();t&&t.first();)t=t.first();return t}var n=this,o=e.toMap("blockquote,center,div,h1,h2,h3,h4,h5,h6,p");n.clickToolbar("quickformat",function(){n.focus();for(var r,a=n.edit.doc,i=n.cmd.range,c=e(a.body).first(),m=[],f=[],h=i.createBookmark(!0);c;){r=c.next();var s=t(c);s&&"img"==s.name||(o[c.name]?(c.html(c.html().replace(/^(\s|&nbsp;|\u3000)+/gi,"")),c.css("text-indent","2em")):f.push(c),(!r||o[r.name]||o[c.name]&&!o[r.name])&&(f.length>0&&m.push(f),f=[])),c=r}e.each(m,function(t,n){var o=e('<p style="text-indent:2em;"></p>',a);n[0].before(o),e.each(n,function(e,t){o.append(t)})}),i.moveToBookmark(h),n.addBookmark()})});